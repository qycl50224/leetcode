# 116. 填充每个节点的下一个右节点 Populating Next Right Pointers in Each Node



### 解法一：二叉树的层序遍历（BFS

- 用队列实现BFS

- 从题目条件知道这是一颗完整的二叉树，每个节点要么没有子节点，要么就有两个，每层的节点要么没有子节点要么都有两个子节点，所以每层的节点数就是`2^level`

- 因此我们可以用for循环来遍历每层的节点，并依次把他们的子节点加入到队列中

- 当遍历到最后一层时，加入的子节点为null，所以当我们出队出了一个null时代表所有节点的next已经归位，可以返回了

  

```java
public Node connect(Node root) {
        Queue<Node> q = new LinkedList<>();
        q.add(root);

        int levelCount = 1;
        while (!q.isEmpty()) {
            for (int i = 1; i <= levelCount; i++) {
                Node n = q.poll();
                System.out.println("level:"+levelCount);
                if (n == null) return root;
                // System.out.println("n.val:"+n.val);
                q.add(n.left);
                q.add(n.right);
                n.next = (levelCount==i) ? null:q.peek();
            }
            levelCount *= 2;
            // System.out.println("levelCount:"+levelCount);
        }
        return root;
    }
```

time：4ms 19%

space：39.3MB 23%
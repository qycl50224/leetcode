# 84. 柱状图中最大的矩形

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        int max = 0;
       // 对每根柱子，求他的最大面积
       for (int i = 0; i < heights.length; i++) {
           int left = i, right = i;
           // 找最左边的柱子的index
           while (left - 1 >= 0 && heights[left - 1] >= heights[i]) left--;
           // 找最右边的柱子的index
           while (right + 1 < heights.length && heights[right + 1] >= heights[i]) right++;
           int area = (right - left + 1) * heights[i];
           if (area > max) max = area;
       }
       return max;
    }
}
```

![image-20200527163716544](C:\Users\chen\AppData\Roaming\Typora\typora-user-images\image-20200527163716544.png)



### 解法二：分治法

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        return helper(heights, 0, heights.length-1);
    }

    private int helper(int[] heights, int start, int end) {
        if (start > end) return 0;
        int minindex = start;
        // find the lowest
        for (int i = start; i <= end; i++) {
            if (heights[i] < heights[minindex]) {
                minindex = i;
            }
        }
        return Math.max(heights[minindex] * (end-start+1), Math.max(helper(heights, start, minindex-1), helper(heights, minindex+1, end)));
    }
}
```

![image-20200527235804820](C:\Users\chen\AppData\Roaming\Typora\typora-user-images\image-20200527235804820.png)

